#!/usr/bin/env bash
#Run command on HTCF: sbatch [filename].sh
#Author: mstaller@wustl.edu

#SBATCH --mem=16000

gunzip *.gz

grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_1_SIC-I1-1238_SIC-I2-43_CATACAACTA_GCGGGTGT_S2_R1_001.fastq > MSS19_01.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_2_SIC-I1-1238_SIC-I2-44_CATACAACTA_TCTTATGT_S3_R1_001.fastq > MSS19_02.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_3_SIC-I1-1238_SIC-I2-45_CATACAACTA_ACGCTAGT_S4_R1_001.fastq > MSS19_03.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_4_SIC-I1-1238_SIC-I2-46_CATACAACTA_TTGATAGT_S5_R1_001.fastq > MSS19_04.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_5_SIC-I1-1238_SIC-I2-47_CATACAACTA_TTACGCGT_S6_R1_001.fastq > MSS19_05.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_6_SIC-I1-1238_SIC-I2-48_CATACAACTA_AATTGTGT_S7_R1_001.fastq > MSS19_06.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_7_SIC-I1-1238_SIC-I2-49_CATACAACTA_TGCACGGT_S8_R1_001.fastq > MSS19_07.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_8_SIC-I1-1238_SIC-I2-50_CATACAACTA_CGCTTCGT_S9_R1_001.fastq > MSS19_08.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_9_SIC-I1-1238_SIC-I2-79_CATACAACTA_GTCATGGT_S10_R1_001.fastq > MSS19_09.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_10_SIC-I1-1238_SIC-I2-80_CATACAACTA_CTTTCAGT_S11_R1_001.fastq > MSS19_10.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_11_SIC-I1-1238_SIC-I2-81_CATACAACTA_ACTACGGT_S12_R1_001.fastq > MSS19_11.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_12_SIC-I1-1238_SIC-I2-82_CATACAACTA_AGACTTGT_S13_R1_001.fastq > MSS19_12.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_13_SIC-I1-1239_SIC-I2-43_GCATCGGCAA_GCGGGTGT_S14_R1_001.fastq > MSS19_13.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_14_SIC-I1-1239_SIC-I2-44_GCATCGGCAA_TCTTATGT_S15_R1_001.fastq > MSS19_14.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_15_SIC-I1-1239_SIC-I2-45_GCATCGGCAA_ACGCTAGT_S16_R1_001.fastq > MSS19_15.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_16_SIC-I1-1239_SIC-I2-46_GCATCGGCAA_TTGATAGT_S17_R1_001.fastq > MSS19_16.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_17_SIC-I1-1239_SIC-I2-47_GCATCGGCAA_TTACGCGT_S18_R1_001.fastq > MSS19_17.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_18_SIC-I1-1239_SIC-I2-48_GCATCGGCAA_AATTGTGT_S19_R1_001.fastq > MSS19_18.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_A_SIC-I1-1239_SIC-I2-49_GCATCGGCAA_TGCACGGT_S20_R1_001.fastq > MSS19_A.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_B1_SIC-I1-1239_SIC-I2-50_GCATCGGCAA_CGCTTCGT_S21_R1_001.fastq > MSS19_B1.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_B2_SIC-I1-1239_SIC-I2-79_GCATCGGCAA_GTCATGGT_S22_R1_001.fastq > MSS19_B2.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_B3_SIC-I1-1239_SIC-I2-80_GCATCGGCAA_CTTTCAGT_S23_R1_001.fastq > MSS19_B3.txt
grep -o TTCTTCTGA.*.CTCGAG Cohen_MSS19_C_SIC-I1-1239_SIC-I2-81_GCATCGGCAA_ACTACGGT_S24_R1_001.fastq > MSS19_C.txt

wc -l *.txt > lineCounts.txt

for i in $(ls MSS*.txt); do
	sort "$i" | uniq -c > "$i"sorted.txt
	rm "$i" # remove intermediate file
done

	#BINNAME= $(echo $i | cut -d '.' -f 1)
	